функция getPageText() {
  константа тело = документ.тело;
  пусть текст = тело.внутреннийТекст || '';
  если (текст.длина > 10000) {
    текст = текст.срез(0, 10000);
  }
  возвращаться текст;
}

хром.время выполнения.onMessage.addListener((сообщение, отправитель, отправитьОтвет) => {
  если (сообщение.тип === 'getPageText') {
    отправитьОтвет({текст: getPageText()});
  }
});
